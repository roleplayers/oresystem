<div class="attributes-container-new">
  <!-- Single header for all attributes -->
  <div class="attributes-single-header">
    <div class="item-name">Name</div>
    <div class="item-dice-pools">Dice Pools</div>
    <div class="item-controls">
      <a class="item-control item-create" title="Create item" data-type="skill"><i class="fas fa-plus"></i> Add item</a>
    </div>
  </div>

  <!-- Two column layout -->
  <div class="attributes-two-columns-new">
    <!-- Primeira coluna -->
    <div class="attributes-column-new">
      {{#each leftColumnStats as |statName|}}
        {{#each ../sortedSkills as |skillGroup groupStatName|}}
          {{#if (eq groupStatName statName)}}
          <ol class="items-list">
            {{!-- Show the stat first --}}
            {{#each ../../stats as |stat|}}
              {{#if (eq stat.name statName)}}
              <li class="item flexrow stat-row" data-item-id="{{stat._id}}">
                <div class="item-name">
                  <div class="item-image">
                    <a class="rollable" data-roll-type="item"><img src="{{stat.img}}" title="{{stat.name}}" width="30" height="30"/></a>
                  </div>
                  <h2>{{stat.name}}</h2>
                </div>
                <div class="item-dice-pools">
                  <div class="dice-pool-section">
                    <label>D:</label>
                    <div class="dice-checkboxes">
                      {{#numLoop stat.system.d}}
                      <span class="dice-box filled">☐</span>
                      {{/numLoop}}
                    </div>
                  </div>
                  <div class="dice-pool-section">
                    <label>E:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.ed}}" min="0" max="10" readonly />
                  </div>
                  <div class="dice-pool-section">
                    <label>M:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.md}}" min="0" max="10" readonly />
                  </div>
                </div>
                <div class="item-controls">
                  <a class="item-control stat-move-up" title="Move Up"><i class="fas fa-arrow-up"></i></a>
                  <a class="item-control stat-move-down" title="Move Down"><i class="fas fa-arrow-down"></i></a>
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/if}}
            {{/each}}
            
            {{!-- Then show skills for this stat --}}
            {{#each skillGroup as |item|}}
            <li class="item flexrow skill-row" data-item-id="{{item._id}}">
              <div class="item-name">
                <div class="item-image">
                  <a class="rollable" data-roll-type="item"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></a>
                </div>
                <h4>{{item.name}}</h4>
              </div>
              <div class="item-dice-pools">
                <div class="dice-pool-section">
                  <label>D:</label>
                  <div class="dice-checkboxes">
                    {{#numLoop item.system.d}}
                    <span class="dice-box filled">☐</span>
                    {{/numLoop}}
                  </div>
                </div>
                <div class="dice-pool-section">
                  <label>E:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.ed}}" min="0" max="10" readonly />
                </div>
                <div class="dice-pool-section">
                  <label>M:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.md}}" min="0" max="10" readonly />
                </div>
              </div>
              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </li>
            {{/each}}
          </ol>
          {{/if}}
        {{/each}}
      {{/each}}
    </div>

    <!-- Segunda coluna -->
    <div class="attributes-column-new">
      {{#each rightColumnStats as |statName|}}
        {{#each ../sortedSkills as |skillGroup groupStatName|}}
          {{#if (eq groupStatName statName)}}
          <ol class="items-list">
            {{!-- Show the stat first --}}
            {{#each ../../stats as |stat|}}
              {{#if (eq stat.name statName)}}
              <li class="item flexrow stat-row" data-item-id="{{stat._id}}">
                <div class="item-name">
                  <div class="item-image">
                    <a class="rollable" data-roll-type="item"><img src="{{stat.img}}" title="{{stat.name}}" width="30" height="30"/></a>
                  </div>
                  <h2>{{stat.name}}</h2>
                </div>
                <div class="item-dice-pools">
                  <div class="dice-pool-section">
                    <label>D:</label>
                    <div class="dice-checkboxes">
                      {{#numLoop stat.system.d}}
                      <span class="dice-box filled">☐</span>
                      {{/numLoop}}
                    </div>
                  </div>
                  <div class="dice-pool-section">
                    <label>E:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.ed}}" min="0" max="10" readonly />
                  </div>
                  <div class="dice-pool-section">
                    <label>M:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.md}}" min="0" max="10" readonly />
                  </div>
                </div>
                <div class="item-controls">
                  <a class="item-control stat-move-up" title="Move Up"><i class="fas fa-arrow-up"></i></a>
                  <a class="item-control stat-move-down" title="Move Down"><i class="fas fa-arrow-down"></i></a>
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/if}}
            {{/each}}
            
            {{!-- Then show skills for this stat --}}
            {{#each skillGroup as |item|}}
            <li class="item flexrow skill-row" data-item-id="{{item._id}}">
              <div class="item-name">
                <div class="item-image">
                  <a class="rollable" data-roll-type="item"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></a>
                </div>
                <h4>{{item.name}}</h4>
              </div>
              <div class="item-dice-pools">
                <div class="dice-pool-section">
                  <label>D:</label>
                  <div class="dice-checkboxes">
                    {{#numLoop item.system.d}}
                    <span class="dice-box filled">☐</span>
                    {{/numLoop}}
                  </div>
                </div>
                <div class="dice-pool-section">
                  <label>E:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.ed}}" min="0" max="10" readonly />
                </div>
                <div class="dice-pool-section">
                  <label>M:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.md}}" min="0" max="10" readonly />
                </div>
              </div>
              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </li>
            {{/each}}
          </ol>
          {{/if}}
        {{/each}}
      {{/each}}
    </div>
  </div>
</div>