<div class="attributes-container-new">
  <!-- Single header for all attributes -->
  <div class="attributes-single-header">
    <div class="item-name">Name</div>
    <div class="item-dice-pools">Dice Pools</div>
    <div class="item-controls">
      <a class="item-control item-create" title="Create item" data-type="skill"><i class="fas fa-plus"></i> Add item</a>
    </div>
  </div>

  <!-- Two column layout -->
  <div class="attributes-two-columns-new">
    <!-- Primeira coluna -->
    <div class="attributes-column-new">
      {{#each leftColumnStats as |statName|}}
        {{#each ../sortedSkills as |skillGroup groupStatName|}}
          {{#if (eq groupStatName statName)}}
          <ol class="items-list">
            {{!-- Show the stat first --}}
            {{#each ../../stats as |stat|}}
              {{#if (eq stat.name statName)}}
              <li class="item flexrow stat-row" data-item-id="{{stat._id}}">
                <div class="item-name">
                  <div class="item-image">
                    <a class="rollable" data-roll-type="item"><img src="{{stat.img}}" title="{{stat.name}}" width="30" height="30"/></a>
                  </div>
                  <h2>{{stat.name}}</h2>
                </div>
                <div class="item-dice-pools">
                  <div class="dice-pool-section">
                    <label>D:</label>
                    <div class="dice-checkboxes">
                      {{#numLoop stat.system.d}}
                      <span class="dice-box filled">☐</span>
                      {{/numLoop}}
                    </div>
                  </div>
                  <div class="dice-pool-section">
                    <label>E:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.ed}}" min="0" max="10" readonly />
                  </div>
                  <div class="dice-pool-section">
                    <label>M:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.md}}" min="0" max="10" readonly />
                  </div>
                </div>
                <div class="item-controls">
                  <a class="item-control stat-move-up" title="Move Up"><i class="fas fa-arrow-up"></i></a>
                  <a class="item-control stat-move-down" title="Move Down"><i class="fas fa-arrow-down"></i></a>
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/if}}
            {{/each}}
            
            {{!-- Then show skills for this stat --}}
            {{#each skillGroup as |item|}}
            <li class="item flexrow skill-row" data-item-id="{{item._id}}">
              <div class="item-name">
                <div class="item-image">
                  <a class="rollable" data-roll-type="item"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></a>
                </div>
                <h4>{{item.name}}</h4>
              </div>
              <div class="item-dice-pools">
                <div class="dice-pool-section">
                  <label>D:</label>
                  <div class="dice-checkboxes">
                    {{#numLoop item.system.d}}
                    <span class="dice-box filled">☐</span>
                    {{/numLoop}}
                  </div>
                </div>
                <div class="dice-pool-section">
                  <label>E:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.ed}}" min="0" max="10" readonly />
                </div>
                <div class="dice-pool-section">
                  <label>M:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.md}}" min="0" max="10" readonly />
                </div>
              </div>
              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </li>
            {{/each}}
          </ol>
          {{/if}}
        {{/each}}
      {{/each}}
    </div>

    <!-- Segunda coluna -->
    <div class="attributes-column-new">
      {{#each rightColumnStats as |statName|}}
        {{#each ../sortedSkills as |skillGroup groupStatName|}}
          {{#if (eq groupStatName statName)}}
          <ol class="items-list">
            {{!-- Show the stat first --}}
            {{#each ../../stats as |stat|}}
              {{#if (eq stat.name statName)}}
              <li class="item flexrow stat-row" data-item-id="{{stat._id}}">
                <div class="item-name">
                  <div class="item-image">
                    <a class="rollable" data-roll-type="item"><img src="{{stat.img}}" title="{{stat.name}}" width="30" height="30"/></a>
                  </div>
                  <h2>{{stat.name}}</h2>
                </div>
                <div class="item-dice-pools">
                  <div class="dice-pool-section">
                    <label>D:</label>
                    <div class="dice-checkboxes">
                      {{#numLoop stat.system.d}}
                      <span class="dice-box filled">☐</span>
                      {{/numLoop}}
                    </div>
                  </div>
                  <div class="dice-pool-section">
                    <label>E:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.ed}}" min="0" max="10" readonly />
                  </div>
                  <div class="dice-pool-section">
                    <label>M:</label>
                    <input type="number" class="dice-number-input" value="{{stat.system.md}}" min="0" max="10" readonly />
                  </div>
                </div>
                <div class="item-controls">
                  <a class="item-control stat-move-up" title="Move Up"><i class="fas fa-arrow-up"></i></a>
                  <a class="item-control stat-move-down" title="Move Down"><i class="fas fa-arrow-down"></i></a>
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/if}}
            {{/each}}
            
            {{!-- Then show skills for this stat --}}
            {{#each skillGroup as |item|}}
            <li class="item flexrow skill-row" data-item-id="{{item._id}}">
              <div class="item-name">
                <div class="item-image">
                  <a class="rollable" data-roll-type="item"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></a>
                </div>
                <h4>{{item.name}}</h4>
              </div>
              <div class="item-dice-pools">
                <div class="dice-pool-section">
                  <label>D:</label>
                  <div class="dice-checkboxes">
                    {{#numLoop item.system.d}}
                    <span class="dice-box filled">☐</span>
                    {{/numLoop}}
                  </div>
                </div>
                <div class="dice-pool-section">
                  <label>E:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.ed}}" min="0" max="10" readonly />
                </div>
                <div class="dice-pool-section">
                  <label>M:</label>
                  <input type="number" class="dice-number-input" value="{{item.system.md}}" min="0" max="10" readonly />
                </div>
              </div>
              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </li>
            {{/each}}
          </ol>
          {{/if}}
        {{/each}}
      {{/each}}
    </div>
  </div>

<style>
.attributes-container-new {
  width: 100%;
}

.attributes-two-columns-new {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-top: 10px;
}

.attributes-column-new {
  min-width: 0;
}

.attributes-column-new .items-list {
  margin-bottom: 20px;
}

/* Override conflicting styles for new layout */
.character-main-content .attributes-container-new .oresystem .items-list .item {
  position: relative;
  align-items: center;
  padding: 0 2px;
  border-bottom: 1px solid #c9c7b8;
  padding-right: 140px; /* Espaço maior para mais controles */
}

.character-main-content .attributes-container-new .oresystem .items-list .item:last-child {
  border-bottom: none;
}

.character-main-content .attributes-container-new .oresystem .items-list .item-controls {
  display: flex;
  flex: 0 0 130px; /* Largura maior para mais botões */
  justify-content: flex-end;
  opacity: 0;
  transition: opacity 0.2s ease;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 3px;
  padding: 2px;
  position: absolute;
  right: 5px;
  top: 50%;
  transform: translateY(-50%);
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.character-main-content .attributes-container-new .oresystem .items-list .item:hover .item-controls {
  opacity: 1;
}

.character-main-content .attributes-container-new .oresystem .items-list .item-controls a {
  font-size: 12px;
  text-align: center;
  margin: 0 2px;
  color: #666;
  transition: color 0.2s ease;
  padding: 2px 3px;
  border-radius: 2px;
  min-width: 18px;
}

.character-main-content .attributes-container-new .oresystem .items-list .item-controls a:hover {
  color: #8b0000;
  background: rgba(139,0,0,0.1);
}

/* Cores específicas para setas */
.character-main-content .attributes-container-new .oresystem .items-list .item-controls .stat-move-up:hover {
  color: #2e7d32;
  background: rgba(46,125,50,0.1);
}

.character-main-content .attributes-container-new .oresystem .items-list .item-controls .stat-move-down:hover {
  color: #1565c0;
  background: rgba(21,101,192,0.1);
}

.character-main-content .attributes-container-new .oresystem .items-list .item-name {
  flex: 2;
  margin: 0;
  overflow: hidden;
  font-size: 13px;
  text-align: left;
  align-items: center;
  display: flex;
  padding-right: 10px; /* Espaço extra para segurança */
}

/* Skills não precisam das setas, só stats */
.character-main-content .attributes-container-new .oresystem .items-list .skill-row .item-controls {
  flex: 0 0 100px; /* Largura menor para skills */
}

.character-main-content .attributes-container-new .oresystem .items-list .skill-row {
  padding-right: 110px; /* Padding menor para skills */
}

/* Responsive para novo layout */
@media (max-width: 768px) {
  .attributes-two-columns-new {
    grid-template-columns: 1fr;
    gap: 10px;
  }
  
  .character-main-content .attributes-container-new .oresystem .items-list .item-controls a {
    font-size: 11px;
    padding: 1px 2px;
    min-width: 16px;
  }
}
</style>